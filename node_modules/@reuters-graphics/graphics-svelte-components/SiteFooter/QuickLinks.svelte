<script>
  import { normalizeUrl } from '../SiteHeader/NavBar/utils';

  import Graphics from './svgs/Graphics.svelte';
  import Pictures from './svgs/Pictures.svelte';
  import Videos from './svgs/Videos.svelte';

  const symbols = {
    graphics: Graphics,
    pictures: Pictures,
    videos: Videos,
  };

  export let links = {};

  let windowWidth = 1200;
  const mobileBreakpoint = 745;
</script>

<svelte:window bind:innerWidth="{windowWidth}" />

{#if links.latest_links}
  <section class="quick-links">
    <h2 class="visually-hidden">Site Index</h2>
    <div class="content-container">
      {#if windowWidth < mobileBreakpoint}
        <div class="latest-and-media">
          <section class="link-group">
            <h3>Latest</h3>
            <ul>
              {#each links.latest_links as link}
                <li>
                  <a href="{normalizeUrl(link.url)}">{link.text}</a>
                </li>
              {/each}
            </ul>
          </section>
          <section class="link-group media">
            <h3>Media</h3>
            <ul>
              {#each links.media_links as link}
                <li>
                  <div class="symbol">
                    <svelte:component this="{symbols[link.symbol]}" />
                  </div>
                  <a href="{normalizeUrl(link.url)}">
                    {link.text}
                  </a>
                </li>
              {/each}
            </ul>
          </section>
        </div>
      {:else}
        <section class="link-group">
          <h3>Latest</h3>
          <ul>
            {#each links.latest_links as link}
              <li>
                <a href="{normalizeUrl(link.url)}">{link.text}</a>
              </li>
            {/each}
          </ul>
        </section>
      {/if}

      <section class="link-group">
        <h3>Browse</h3>
        <ul>
          {#each links.browse_links as link}
            <li>
              <a href="{normalizeUrl(link.url)}">{link.text}</a>
            </li>
          {/each}
        </ul>
      </section>
      {#if windowWidth >= mobileBreakpoint}
        <section class="link-group media">
          <h3>Media</h3>
          <ul>
            {#each links.media_links as link}
              <li>
                <div class="symbol">
                  <svelte:component this="{symbols[link.symbol]}" />
                </div>
                <a href="{normalizeUrl(link.url)}">
                  {link.text}
                </a>
              </li>
            {/each}
          </ul>
        </section>
      {/if}
      <div class="about-and-stay-informed">
        <section class="about">
          <h3>About Reuters</h3>
          <ul>
            {#each links.about_links as link}
              <li>
                <a href="{normalizeUrl(link.url)}">{link.text}</a>
              </li>
            {/each}
          </ul>
        </section>
        <section class="stay-informed">
          <h3>Stay Informed</h3>
          <ul>
            {#each links.stay_informed_links as link}
              <li>
                <a href="{normalizeUrl(link.url)}">{link.text}</a>
              </li>
            {/each}
          </ul>
        </section>
      </div>
    </div>
  </section>
{/if}

<style>.content-container {
  max-width: 1440px;
  width: 100%;
  margin: 0 auto;
}

.quick-links {
  padding-top: 24px;
  padding-bottom: 24px;
  box-sizing: border-box;
}
.quick-links .content-container {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  grid-column-gap: 2.2222222222vw;
}
@media (max-width: 1023px) {
  .quick-links .content-container {
    grid-column-gap: 4.2666666667vw;
  }
}
@media (min-width: 1440px) {
  .quick-links .content-container {
    grid-column-gap: 32px;
  }
}
@media (max-width: 1023px) {
  .quick-links .content-container {
    grid-template-columns: repeat(4, 1fr);
  }
}
.quick-links ul {
  margin: 0;
  padding: 0;
}
.quick-links ul li {
  list-style: none;
  display: flex;
  align-items: center;
  margin: 8px 0;
  font-family: "Knowledge", "Source Sans Pro", Arial, sans-serif;
}
.quick-links ul li a {
  color: var(--nav-primary, #404040);
  font-weight: 500;
  font-size: 16px;
}

section.quick-links {
  border-top: 1px solid var(--nav-rules, #d0d0d0);
  max-width: 100%;
}
section.quick-links .content-container {
  padding-left: 2.2222222222vw;
  padding-right: 2.2222222222vw;
  box-sizing: border-box;
}
@media (max-width: 1023px) {
  section.quick-links .content-container {
    padding-left: 4.2666666667vw;
    padding-right: 4.2666666667vw;
  }
}
@media (min-width: 1440px) {
  section.quick-links .content-container {
    padding-left: 32px;
    padding-right: 32px;
  }
}
section.quick-links h3 {
  color: var(--nav-primary, #404040);
  font-size: 16px;
  font-weight: 400;
  margin: 0;
}

.quick-links .content-container {
  grid-row-gap: 2.2222222222vw;
}
@media (max-width: 1023px) {
  .quick-links .content-container {
    grid-row-gap: 4.2666666667vw;
  }
}
@media (min-width: 1440px) {
  .quick-links .content-container {
    grid-row-gap: 32px;
  }
}
.quick-links .content-container section.link-group {
  grid-column: auto/span 2;
  margin: 0;
}
@media (min-width: 1024px) {
  .quick-links .content-container section.link-group:last-child {
    grid-column: 10/span 3;
  }
}
.quick-links .content-container .latest-and-media {
  grid-column: 1/span 2;
  grid-row: 1;
}
.quick-links .content-container .latest-and-media .media {
  margin-top: 24px;
}
.quick-links .content-container .about-and-stay-informed {
  grid-column: 7/span 3;
  grid-row: 1;
}
@media (max-width: 1023px) {
  .quick-links .content-container .about-and-stay-informed {
    grid-column: 9/span 3;
  }
}
@media (max-width: 745px) {
  .quick-links .content-container .about-and-stay-informed {
    grid-column: 1/span 2;
    grid-row: 2;
  }
}
.quick-links .content-container .stay-informed {
  margin-top: 24px;
}

.symbol {
  width: 20px;
  margin-right: 16px;
}

.visually-hidden {
  border: 0;
  clip: rect(0 0 0 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
  white-space: nowrap;
}</style>
